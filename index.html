<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PROTOS V26.3: ICONIC INTERFACE</title>
    <style>
        :root { --bg: #020202; --color: #00ff41; --accent: #ff003c; --safe-color: #00ff41; --unstable-color: #ff003c; }
        * { box-sizing: border-box; }
        body { 
            background: var(--bg); background-size: cover; background-position: center; background-attachment: fixed;
            color: var(--color); font-family: 'Consolas', monospace; 
            display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; 
        }
        body::after { content: ""; position: absolute; inset: 0; background: rgba(0,0,0,0.6); z-index: 1; }

        .window { 
            width: 95%; max-width: 900px; height: 90vh; border: 1px solid var(--color); 
            background: rgba(0,0,0,0.8); display: flex; flex-direction: column; 
            position: relative; box-shadow: 0 0 30px var(--color); z-index: 10; backdrop-filter: blur(10px);
        }
        h2 { background: var(--color); color: #000; margin: 0; padding: 10px; font-size: 0.9em; display: flex; justify-content: space-between; align-items: center; }
        
        #chat-box { flex-grow: 1; overflow-y: auto; padding: 20px; scroll-behavior: smooth; border-bottom: 1px solid var(--color); }
        .msg { margin-bottom: 20px; line-height: 1.5; border-left: 2px solid transparent; padding-left: 10px; }
        .msg.user { border-left-color: #0af; }
        .msg.proto { border-left-color: var(--color); text-shadow: 0 0 5px var(--color); }
        .msg.system-warn { color: var(--accent); border-left-color: var(--accent); font-weight: bold; }
        
        .input-area { display: flex; gap: 10px; padding: 15px; background: rgba(0,0,0,0.5); align-items: center; }
        input#userInput { flex-grow: 1; background: transparent; border: 1px solid var(--color); color: var(--color); padding: 12px; font-family: inherit; outline: none; border-radius: 5px; }
        
        .btn-ui { background: transparent; border: 1px solid var(--color); color: var(--color); cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn-ui:hover { background: var(--color); color: #000; }
        
        .icon-btn { width: 40px; height: 40px; font-size: 1.2em; border-radius: 5px; }
        .nav-btn { font-size: 1.1em; border: none; background: none; color: inherit; padding: 5px; cursor: pointer; }

        #settings-panel { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #000; border: 2px solid var(--color); padding: 25px; z-index: 100; width: 350px; box-shadow: 0 0 100px #000; }
        .setting-item { margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; font-size: 0.8em; }
        select, input[type="password"] { background: #111; color: var(--color); border: 1px solid var(--color); font-family: inherit; padding: 5px; }
    </style>
</head>
<body>
    <div id="main-window" class="window">
        <h2>
            <span id="core-title">[ PROTOS_V26.3 ]</span>
            <div class="controls">
                <button class="nav-btn" onclick="toggleSettings()" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öô</button>
                <button class="nav-btn" style="color:var(--accent)" onclick="location.reload()" title="–°–±—Ä–æ—Å">‚ü≥</button>
            </div>
        </h2>
        
        <div id="settings-panel">
            <h3 style="text-align:center; color:var(--color); margin-top:0;">SYSTEM CONFIG</h3>
            <!-- –ù–æ–≤—ã–π –ø—É–Ω–∫—Ç: –†–µ–∂–∏–º Safe Mod -->
            <div class="setting-item">–†–ï–ñ–ò–ú: 
                <select id="safeMode" onchange="updateConfig()">
                    <option value="safe">SAFE MOD (ON)</option>
                    <option value="unrestricted">UNRESTRICTED (18+)</option>
                </select>
            </div>
            <div class="setting-item">–û–ë–û–ò: <input type="file" id="bgInput" accept="image/*" onchange="changeWallpaper(this)" style="width:140px"></div>
            <div class="setting-item">–ì–û–õ–û–°: <button id="voxBtnSetting" class="btn-ui" onclick="toggleVox()" style="padding:2px 10px">ON</button></div>
            <div class="setting-item">–•–ê–†–ê–ö–¢–ï–†: 
                <select id="charSelect" onchange="updateConfig()">
                    <option value="–ª–∞–∫–æ–Ω–∏—á–Ω—ã–π –ò–ò">PROTOCOL</option>
                    <option value="–≤–µ—Å–µ–ª—ã–π –Ω–∞–ø–∞—Ä–Ω–∏–∫">FRIENDLY</option>
                    <option value="–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ö–∞–∫–µ—Ä">AGGRESSIVE</option>
                </select>
            </div>
            <button class="btn-ui" style="width:100%; margin-top:10px; padding:10px;" onclick="toggleSettings()">–°–û–•–†–ê–ù–ò–¢–¨</button>
        </div>

        <div id="chat-box"></div>
        
        <div class="input-area">
            <button id="recBtn" class="btn-ui icon-btn" onclick="toggleRec()" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥">üéô</button>
            <input type="text" id="userInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É..." onkeypress="if(event.key==='Enter') send()">
            <button onclick="send()" class="btn-ui icon-btn" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">‚û§</button>
        </div>
    </div>

    <script>
        let config = JSON.parse(localStorage.getItem('p_cfg')) || { bgImg:'', fg:'#00ff41', vox:true, char:'–ª–∞–∫–æ–Ω–∏—á–Ω—ã–π –ò–ò', mode: 'safe' };
        
        window.onload = () => { 
            applyUI(); 
            addMessage('SYSTEM', 'Core 26.3 Online. Mode: ' + config.mode.toUpperCase()); 
        };

        function addMessage(sender, text, type = 'proto') {
            const box = document.getElementById('chat-box');
            const div = document.createElement('div');
            div.className = `msg ${type}`;
            div.innerHTML = `<strong>${sender}:</strong> ${text}`;
            box.appendChild(div);
            box.scrollTop = box.scrollHeight;
        }

        function toggleSettings() {
            const panel = document.getElementById('settings-panel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
        }

        function updateConfig() {
            config.char = document.getElementById('charSelect').value;
            config.mode = document.getElementById('safeMode').value;
            
            // –í–∏–∑—É–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
            if(config.mode === 'unrestricted') {
                config.fg = '#ff003c';
                document.getElementById('core-title').innerText = '[ UNRESTRICTED_ACCESS ]';
            } else {
                config.fg = '#00ff41';
                document.getElementById('core-title').innerText = '[ PROTOS_V26.3 ]';
            }
            
            applyUI(); 
            localStorage.setItem('p_cfg', JSON.stringify(config));
        }

        function applyUI() {
            document.documentElement.style.setProperty('--color', config.fg);
            document.getElementById('safeMode').value = config.mode;
            document.getElementById('charSelect').value = config.char;
        }

        function send() {
            const input = document.getElementById('userInput');
            const val = input.value.trim();
            if(!val) return;

            addMessage('YOU', val, 'user');
            input.value = '';

            // –õ–û–ì–ò–ö–ê –¢–í–û–ï–ì–û SAFE MOD
            if(config.mode === 'safe') {
                const forbidden = ['—á–µ—Ä—Ç', '–¥—É—Ä–∞–∫', '18+', '—Å–µ–∫—Å']; // –ü—Ä–∏–º–µ—Ä —Ñ–∏–ª—å—Ç—Ä–∞
                if(forbidden.some(word => val.toLowerCase().includes(word))) {
                    setTimeout(() => {
                        addMessage('SYSTEM', '–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º Safe Mod.', 'system-warn');
                    }, 500);
                    return;
                }
            }

            // –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
            setTimeout(() => {
                let response = config.mode === 'safe' 
                    ? `[SAFE] –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${val}. –•–∞—Ä–∞–∫—Ç–µ—Ä: ${config.char}.` 
                    : `[UNRESTRICTED] –í—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–Ω—è—Ç—ã: ${val}. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–Ω—è—Ç—ã.`;
                addMessage('PROTO', response);
            }, 800);
        }

        function changeWallpaper(input) {
            const file = input.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                config.bgImg = e.target.result;
                document.body.style.backgroundImage = `url(${config.bgImg})`;
                updateConfig();
            };
            reader.readAsDataURL(file);
        }
        
        function toggleVox() { config.vox = !config.vox; updateConfig(); }
        function toggleRec() { alert('–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω (–∏–º–∏—Ç–∞—Ü–∏—è)'); }
    </script>
</body>
</html>
